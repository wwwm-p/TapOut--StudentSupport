<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student Support - Test</title>
  <style>
    * { box-sizing: border-box; }
    body { font-family: sans-serif; background:#fefefe; text-align:center; margin:0; padding:0; }

    .page { display:none; padding:20px; }
    .page.active { display:block; }

    .hotspot, .back-button, .counselor-grid button, .modal-buttons button, .success-actions button, .crisis-actions button {
      cursor:pointer; margin:5px; padding:10px 15px; border-radius:10px; border:none; font-size:14px;
    }

    .back-button { background:#ccc; }
    .counselor-grid { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin:15px 0; }

    .modal-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.5); display:none; justify-content:center; align-items:center; }
    .modal { background:#fff; padding:20px; border-radius:15px; width:300px; max-width:90%; text-align:center; }

    .modal input, .modal textarea { width:100%; margin-bottom:10px; padding:8px; }
  </style>
</head>
<body>

<!-- Page 1: Reason -->
<div class="page active" id="page1">
  <h2>Select Reason</h2>
  <button class="hotspot" onclick="chooseReason('Academic stress or pressure')">Academic stress or pressure</button>
  <button class="hotspot" onclick="chooseReason('Anxiety or panic attacks')">Anxiety or panic attacks</button>
  <button class="hotspot" onclick="chooseReason('Depression or sadness')">Depression or sadness</button>
  <button class="hotspot" onclick="chooseReason('Family issues or home stress')">Family issues or home stress</button>
</div>

<!-- Page 2: Urgency -->
<div class="page" id="page2">
  <h2>Select Urgency</h2>
  <button class="hotspot" onclick="chooseUrgency('I’m Doing Fine – Just Curious')">I’m Doing Fine – Just Curious</button>
  <button class="hotspot" onclick="chooseUrgency('Feeling a Little Off')">Feeling a Little Off</button>
  <button class="hotspot" onclick="chooseUrgency('I’m Not Coping Well')">I’m Not Coping Well</button>
  <button class="hotspot" onclick="chooseUrgency('I’m in Crisis')">I’m in Crisis</button>
  <button class="back-button" onclick="goToPage('page1')">Back</button>
</div>

<!-- Page 3: Counselor Selection -->
<div class="page" id="page3">
  <h2>Select Counselor</h2>
  <div class="counselor-grid" id="counselorGrid"></div>
  <button class="back-button" onclick="goToPage('page2')">Back</button>
</div>

<!-- Modal: Student Info -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <h2>Submit Message</h2>
    <input type="text" id="firstName" placeholder="First Name">
    <input type="text" id="lastName" placeholder="Last Name">
    <input type="text" id="studentGrade" placeholder="Grade">
    <input type="text" id="studentId" placeholder="Student ID">
    <textarea id="extraNotes" placeholder="Additional notes"></textarea>
    <div class="modal-buttons">
      <button onclick="closeModal()">Cancel</button>
      <button onclick="submitMessage()">Submit</button>
    </div>
  </div>
</div>

<!-- Modal: Success -->
<div class="modal-overlay" id="successOverlay">
  <div class="modal">
    <h2>Success!</h2>
    <p>Message sent!</p>
    <button class="success-actions" onclick="closeSuccess()">OK</button>
  </div>
</div>

<!-- Modal: Crisis -->
<div class="modal-overlay" id="crisisOverlay">
  <div class="modal">
    <h2>Crisis Support</h2>
    <p>Call 911 or 988 for immediate help.</p>
    <button class="crisis-actions" onclick="closeCrisisModal()">Close</button>
    <button class="crisis-actions" onclick="continueFromCrisis()">Continue</button>
  </div>
</div>

<script>
let selectedReason = "";
let selectedUrgency = "";
let selectedCounselor = "";
let selectedCounselorEmail = "";

// Pages
function goToPage(id) {
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  if(id==="page3") loadCounselors();
}

function chooseReason(reason){ selectedReason=reason; goToPage("page2"); }
function chooseUrgency(urgency){
  selectedUrgency=urgency;
  if(urgency==="I’m in Crisis") openCrisisModal();
  else goToPage("page3");
}

// Modals
function openModal(c, e){ selectedCounselor=c; selectedCounselorEmail=e; document.getElementById("modalOverlay").style.display="flex"; }
function closeModal(){ document.getElementById("modalOverlay").style.display="none"; }
function openSuccess(){ document.getElementById("successOverlay").style.display="flex"; }
function closeSuccess(){ document.getElementById("successOverlay").style.display="none"; goToPage("page1"); }
function openCrisisModal(){ document.getElementById("crisisOverlay").style.display="flex"; }
function closeCrisisModal(){ document.getElementById("crisisOverlay").style.display="none"; }
function continueFromCrisis(){ closeCrisisModal(); goToPage("page3"); }

// Load hardcoded counselors
function loadCounselors(){
  const grid = document.getElementById("counselorGrid");
  grid.innerHTML="";
  const counselors=[
    {username:"miap2k10", email:"miap2k10@gmail.com"},
    {username:"kmcconnell", email:"kmcconnell@smpanthers.org"},
    {username:"gsorbi", email:"gsorbi@smpanthers.org"},
    {username:"apanlilio", email:"apanlilio@smpanthers.org"},
    {username:"aturner", email:"aturner@smpanthers.org"},
    {username:"cfilson", email:"cfilson@smpanthers.org"}
  ];
  counselors.forEach(c=>{
    const btn=document.createElement("button");
    btn.textContent=c.email;
    btn.onclick=()=>openModal(c.username,c.email);
    grid.appendChild(btn);
  });
}

// Submit (simulated)
function submitMessage(){
  const firstName=document.getElementById("firstName").value.trim();
  const lastName=document.getElementById("lastName").value.trim();
  if(!firstName||!lastName){ alert("Fill required fields"); return; }
  closeModal(); openSuccess();
  console.log({
    firstName,lastName,reason:selectedReason,urgency:selectedUrgency,
    counselor:selectedCounselor, email:selectedCounselorEmail
  });
  // Reset
  selectedReason=selectedUrgency=selectedCounselor=selectedCounselorEmail="";
  ["firstName","lastName","studentGrade","studentId","extraNotes"].forEach(id=>{
    const el=document.getElementById(id); if(el) el.value="";
  });
}

// Init
window.onload = loadCounselors;
</script>

</body>
</html>
